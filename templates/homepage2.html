<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href={{ url_for('static', path='styles/sheet_homepage2.css') }}>
    <title>Accueil ‚Ä¢ I-Leaf</title>
  <link rel = "icon" type = "image/x-icon" href ={{ url_for('static', path='images/logo_i_leaf_without_name.svg') }}>
</head>
<body>
    <div class="text-area">
        <div>
            <img id="logo" src={{ url_for('static', path='images/logo_i_leaf_with_name_cropped.png') }}>
        </div>
        <div>
            <h1>Bienvenue sur le site de I-Leaf !</h1>
            <br>
            <h1>Faut que je rajoute du texte ICI</h1>
        </div>
    </div>
    <div class="circle-container">
        <div class="circle" id="home">
            <span class="icon">üè†</span>
            <div class="text">Logements</div>
        </div>
        <div class="circle" id="weather">
            <span class="icon">‚õÖ</span>
            <div class="text">M√©t√©o</div>
        </div>
        <div class="circle" id="bill">
            <span class="icon">üìÑ</span>
            <div class="text">Factures</div>
        </div>
    </div>
    
    <script>
        // S√©lection des √©l√©ments du DOM
        const circles = document.querySelectorAll('.circle');
        const circleContainer = document.querySelector('.circle-container');
        // const texts = document.querySelectorAll('.text');
        const textHome = document.querySelector('#home .text');
        const textWeather = document.querySelector('#weather .text');
        const textBill = document.querySelector('#bill .text');
        // Fonction qui r√©initialise les cercles et le fond
        function resetCirclesAndBackground() {
            circles.forEach(circle => {
                circle.classList.remove('not-hovered');
                circle.style.background = '#A3B87D'; // Couleur initiale des cercles
            });
            [textHome, textWeather, textBill].forEach(text => { 
                text.style.display = 'none'; 
            });
            textHome.
            document.body.style.background = '';    // R√©initialise le fond
            circleContainer.style.background = '';  // R√©initialise la couleur du conteneur de cercle
        }
        // Ajout des √©v√©nements de survol
        circles.forEach(circle => {
            circle.addEventListener('mouseover', function() {
                resetCirclesAndBackground(); // R√©initialise avant de modifier l'√©tat
                let backgroundGradient = '';
                if (this.id === 'home') {
                    backgroundGradient = 'radial-gradient(circle, #FFD898, #FFEFD5)'; // D√©grad√© pour "home"
                    textHome.style.display = 'block';
                } else if (this.id === 'weather') {
                    backgroundGradient = 'radial-gradient(circle, #86e1ff, #4ABFF7)'; // D√©grad√© pour "weather"
                    textWeather.style.display = 'block';
                } else if (this.id === 'bill') {
                    backgroundGradient = 'radial-gradient(circle, #a6b3bc, #87959F)'; // D√©grad√© pour "bill"
                    textBill.style.display = 'block';
                }
                // Appliquer le d√©grad√© au fond de la page
                // document.body.style.background = backgroundGradient;
                document.body.style.backgroundColor = backgroundGradient;
                // Appliquer le m√™me d√©grad√© au cercle survol√©
                this.style.background = backgroundGradient;
                // Appliquer le m√™me d√©grad√© √† l'√©l√©ment contenant les cercles
                circleContainer.style.background = backgroundGradient;
                
                this.classList.add('hovered');
                circles.forEach(otherCircle => {
                    if (otherCircle !== this) {
                        otherCircle.classList.add('not-hovered');
                    }
                });
            });

            circle.addEventListener('mouseout', function() {
                resetCirclesAndBackground();
                [textHome, textWeather, textBill].forEach(text => { 
                    text.style.display = 'none'; 
                });    
            });
        });

        // Cr√©er un menu d√©roulant et un bouton d‚Äôenvoi
        const dropdownMenu = document.createElement('select');
        dropdownMenu.id = 'dropdown-menu';
        dropdownMenu.innerHTML = `
            <option value="">-- Choisissez une option --</option>
            {% for logement in housing %}
                <option value="{{ logement['id']}}">{{ logement['id'] }}) {{ logement['nom'] }}</option>
            {% endfor %}
        `;
        const submitButton = document.createElement('button');
        submitButton.id = 'submit-button';
        submitButton.textContent = 'Envoyer';
        submitButton.disabled = true; // D√©sactiv√© jusqu'√† ce qu'une option soit choisie
        // Fonction pour cacher les cercles sauf celui cliqu√©
        function hideOtherCircles(clickedCircle) {
            circles.forEach(circle => {
                if (circle !== clickedCircle) {
                    circle.style.display = 'none';
                }
            });
        }
        // Activer ou d√©sactiver le bouton selon la s√©lection
        dropdownMenu.addEventListener('change', () => {
            submitButton.disabled = dropdownMenu.value === '';
        });
        // Ajouter un √©v√©nement de clic pour chaque cercle
        circles.forEach(circle => {
            circle.addEventListener('click', function () {
                hideOtherCircles(this); // Cacher les autres cercles
                // this.style.display = 'none'; // Laisser le cercle cliqu√© affich√©
                // Afficher le menu d√©roulant et le bouton
                circleContainer.appendChild(dropdownMenu);
                circleContainer.appendChild(submitButton);
            });
        });
        // Ajouter un √©v√©nement au bouton pour la redirection
        submitButton.addEventListener('click', () => {
            if (dropdownMenu.value !== '') {
                window.location.href = `/logements/${dropdownMenu.value}/meteo/`;
            }
        });
    </script>
</body>
</html>
